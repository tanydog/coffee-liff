<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Coffee Tracker</title>
</head>
<body>
  <h1>☕ コーヒーロガー</h1>
  <p>LINE内で起動しています。</p>
  <button id="qrBtn">📷 QRコードを読み取る</button>
  <p id="result"></p>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    const LIFF_ID = "あなたのLIFF IDをここに貼ってください";

    liff.init({ liffId: LIFF_ID })
      .then(() => {
        document.getElementById("qrBtn").addEventListener("click", () => {
          if (!liff.isInClient()) {
            alert("スマホのLINEアプリ内で開いてください");
            return;
          }
          liff.scanCode()
            .then(result => {
              document.getElementById("result").innerText = "読み取った内容：" + result.value;
            })
            .catch(err => {
              console.error("QR読み取りエラー", err);
              alert("QRコードの読み取りに失敗しました");
            });
        });
      })
      .catch(err => {
        console.error("LIFF初期化失敗", err);
        alert("LIFF初期化に失敗しました。LIFF IDが正しいか確認してください。");
      });
  </script>
</body>
</html>
